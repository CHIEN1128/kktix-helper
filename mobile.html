<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>KKTIX åŠ©æ‰‹</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2em;
      background: #f9f9f9;
    }
    button {
      font-size: 1.2em;
      padding: 1em 2em;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>KKTIX åŠ©æ‰‹</h1>
  <p>é»æ“Šä¸‹æ–¹æŒ‰éˆ•ä»¥åŸ·è¡ŒåŠ©æ‰‹è…³æœ¬ï¼š</p>
  <button onclick="runHelper()">â–¶ åŸ·è¡Œ KKTIX åŠ©æ‰‹è…³æœ¬</button>

  <script>
    function runHelper() {
      const kktixWindow = window.open('', 'kktixTarget');
      if (kktixWindow) {
        kktixWindow.focus();
        kktixWindow.eval(`(function() {
          // ç§»é™¤æ´»å‹•è³‡è¨Šå€å¡Š
          const info = document.querySelector('.activity-info');
          if (info) info.remove();

          // ç§»é™¤å·²å”®å®Œæˆ–æš«ç„¡ç¥¨åˆ¸çš„å€å¡Š
          document.querySelectorAll('.ticket-type-row').forEach(row => {
            const text = row.innerText;
            if (text.includes('å·²å”®å®Œ') || text.includes('æš«ç„¡ç¥¨åˆ¸')) {
              row.remove();
            }
          });

          // è‡ªå‹•å‹¾é¸åŒæ„æ¢æ¬¾
          const checkbox = document.querySelector('input[name="accept_agreement"]');
          if (checkbox && !checkbox.checked) {
            checkbox.checked = true;
          }

          // è‹¥å…¨éƒ¨ç¥¨åˆ¸å”®å®Œï¼Œé¡¯ç¤ºæç¤º
          const remainingTickets = document.querySelectorAll('.ticket-type-row');
          if (remainingTickets.length === 0) {
            alert('ç›®å‰æ‰€æœ‰ç¥¨åˆ¸å‡å·²å”®å®Œã€‚');
          }

          // æ¯ 3 ç§’åµæ¸¬ç¥¨åˆ¸é‡‹å‡º
          setInterval(() => {
            const rows = document.querySelectorAll('.ticket-type-row');
            let available = false;
            rows.forEach(row => {
              const text = row.innerText;
              if (!text.includes('å·²å”®å®Œ') && !text.includes('æš«ç„¡ç¥¨åˆ¸')) {
                available = true;
              }
            });
            if (available) {
              alert('ğŸ‰ ç™¼ç¾å¯è³¼ç¥¨åˆ¸ï¼è«‹é¦¬ä¸ŠæŸ¥çœ‹ï¼');
            }
          }, 3000);
        })();`);
      } else {
        alert('è«‹å…ˆé–‹å•Ÿ KKTIX æ´»å‹•é é¢ï¼Œç„¶å¾Œå†åŸ·è¡Œæ­¤åŠ©æ‰‹ã€‚');
      }
    }
  </script>
</body>
</html>
